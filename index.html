<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aksiyon Takip Sistemi - Anadolu Bakır & AIFTEAM</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        /* --- GİRİŞ FORMU İÇİN STİLLER --- */
        #login-container { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
        }
        .login-box { 
            background: white; 
            padding: 40px; 
            border-radius: 12px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            width: 90%;
            max-width: 380px; 
            text-align: center;
        }
        .login-box h1 {
            margin-bottom: 25px;
            color: #1f2937;
            font-size: 1.8rem;
        }
        .login-box input { 
            width: 100%; 
            padding: 12px; 
            margin-bottom: 15px; 
            border: 2px solid #f3f4f6; 
            border-radius: 8px; 
            box-sizing: border-box; 
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        .login-box input:focus {
            outline: none;
            border-color: #2563eb;
        }
        .login-box button { 
            width: 100%; 
            padding: 12px; 
            background-color: #2563eb; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 1rem; 
            font-weight: 600;
            transition: background-color 0.3s;
        }
        .login-box button:hover {
            background-color: #1e40af;
        }
        #login-error { 
            color: #ef4444; 
            margin-top: 15px; 
            min-height: 20px;
            font-weight: 500;
        }

        /* --- SİZİN MEVCUT CSS KODLARINIZ BURADA BAŞLIYOR --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --gray: #6b7280;
            --light-gray: #f3f4f6;
            --white: #ffffff;
            --anadolu: #e74c3c;
            --anadolu-light: #ffeaa7;
            --aifteam: #3498db;
            --aifteam-light: #74b9ff;
            --ortak: #9b59b6;
            --ortak-light: #dfe6e9;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        #app-container body {
             padding: 20px;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        .header {
            background: var(--white);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
            animation: slideDown 0.5s ease;
        }
        /* ... SİZİN DİĞER TÜM CSS KODLARINIZ BURAYA GELECEK ... */
        /* (Hiçbir değişiklik yapılmadı, mevcut kodunuzun tamamı burada varsayılıyor) */
        .header-content{display:flex;align-items:center;gap:30px;margin-bottom:20px}.header h1{color:var(--dark);font-size:2.5rem;flex:1}.team-badges{display:flex;gap:15px}.team-badge{padding:10px 20px;border-radius:25px;font-weight:600;display:flex;align-items:center;gap:8px;color:var(--white)}.team-badge.anadolu{background:linear-gradient(135deg,var(--anadolu) 0%,#c0392b 100%)}.team-badge.aifteam{background:linear-gradient(135deg,var(--aifteam) 0%,#2980b9 100%)}.team-badge.ortak{background:linear-gradient(135deg,var(--ortak) 0%,#8e44ad 100%)}.header p{color:var(--gray);font-size:1.1rem}.stats-row{display:flex;gap:20px;margin-bottom:30px;flex-wrap:wrap}.team-stats{flex:1;min-width:300px;background:var(--white);border-radius:12px;padding:20px;box-shadow:var(--shadow)}.team-stats.anadolu-stats{border-top:4px solid var(--anadolu)}.team-stats.aifteam-stats{border-top:4px solid var(--aifteam)}.team-stats.ortak-stats{border-top:4px solid var(--ortak)}.team-stats h3{font-size:1.2rem;margin-bottom:15px;display:flex;align-items:center;gap:10px}.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.mini-stat{text-align:center;padding:10px;background:var(--light-gray);border-radius:8px}.mini-stat .label{font-size:.75rem;color:var(--gray);text-transform:uppercase;margin-bottom:5px}.mini-stat .value{font-size:1.5rem;font-weight:700;color:var(--dark)}.controls{background:var(--white);border-radius:12px;padding:20px;margin-bottom:30px;box-shadow:var(--shadow)}.controls-top{display:flex;gap:15px;align-items:center;margin-bottom:15px;flex-wrap:wrap}.search-box{flex:1;min-width:200px;position:relative}.search-box input{width:100%;padding:12px 40px 12px 15px;border:2px solid var(--light-gray);border-radius:8px;font-size:1rem;transition:all .3s ease}.search-box input:focus{outline:none;border-color:var(--primary)}.add-btn{padding:12px 24px;background:linear-gradient(135deg,var(--secondary) 0%,#059669 100%);color:var(--white);border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:1rem;transition:transform .2s ease,box-shadow .2s ease}.add-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.export-buttons{display:flex;gap:10px}.export-btn{padding:10px 18px;background:var(--white);border:2px solid var(--primary);color:var(--primary);border-radius:8px;cursor:pointer;font-weight:500;font-size:.9rem;transition:all .2s ease;display:flex;align-items:center;gap:6px}.export-btn:hover{background:var(--primary);color:var(--white);transform:translateY(-2px)}.export-btn.excel{border-color:#107c41;color:#107c41}.export-btn.excel:hover{background:#107c41;color:var(--white)}.export-btn.word{border-color:#2b579a;color:#2b579a}.export-btn.word:hover{background:#2b579a;color:var(--white)}.export-btn.import{border-color:#22c55e;color:#22c55e}.export-btn.import:hover{background:#22c55e;color:var(--white)}.filter-section{display:flex;gap:20px;align-items:center;flex-wrap:wrap}.filter-label{font-weight:600;color:var(--dark)}.team-filters{display:flex;gap:10px}.team-filter-btn{padding:8px 16px;border:2px solid var(--light-gray);background:var(--white);border-radius:20px;cursor:pointer;transition:all .3s ease;font-weight:500;display:flex;align-items:center;gap:5px}.team-filter-btn:hover{transform:translateY(-2px)}.team-filter-btn.active.all{background:var(--dark);color:var(--white);border-color:var(--dark)}.team-filter-btn.active.anadolu{background:var(--anadolu);color:var(--white);border-color:var(--anadolu)}.team-filter-btn.active.aifteam{background:var(--aifteam);color:var(--white);border-color:var(--aifteam)}.team-filter-btn.active.ortak{background:var(--ortak);color:var(--white);border-color:var(--ortak)}.status-filters{display:flex;gap:10px}.filter-btn{padding:8px 16px;border:2px solid var(--light-gray);background:var(--white);border-radius:8px;cursor:pointer;transition:all .3s ease;font-size:.9rem}.filter-btn:hover{background:var(--light-gray)}.filter-btn.active{background:var(--primary);color:var(--white);border-color:var(--primary)}.view-toggle{display:flex;gap:10px;margin-left:auto}.view-btn{padding:8px 12px;border:1px solid var(--light-gray);background:var(--white);border-radius:6px;cursor:pointer;transition:all .2s ease}.view-btn.active{background:var(--primary);color:var(--white)}.actions-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(380px,1fr));gap:25px}.actions-container.grouped{display:block}.team-section{margin-bottom:30px}.team-header{padding:15px 20px;border-radius:12px 12px 0 0;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;color:var(--white)}.team-header.anadolu{background:linear-gradient(135deg,var(--anadolu) 0%,#c0392b 100%)}.team-header.aifteam{background:linear-gradient(135deg,var(--aifteam) 0%,#2980b9 100%)}.team-header.ortak{background:linear-gradient(135deg,var(--ortak) 0%,#8e44ad 100%)}.team-header h2{display:flex;align-items:center;gap:10px}.team-actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(380px,1fr));gap:20px}.action-card{background:var(--white);border-radius:12px;padding:20px;box-shadow:var(--shadow);transition:all .3s ease;animation:slideUp .5s ease;border-left:4px solid transparent}.action-card.anadolu{border-left-color:var(--anadolu)}.action-card.aifteam{border-left-color:var(--aifteam)}.action-card.ortak{border-left-color:var(--ortak)}.action-card:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg)}.action-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:15px}.action-title{font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px}.responsible{font-size:.875rem;color:var(--gray);display:flex;align-items:center;gap:5px}.responsible-badge{padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:600;margin-left:5px}.responsible-badge.anadolu{background:rgba(231,76,60,.1);color:var(--anadolu)}.responsible-badge.aifteam{background:rgba(52,152,219,.1);color:var(--aifteam)}.responsible-badge.ortak{background:rgba(155,89,182,.1);color:var(--ortak)}.status-badge{padding:6px 12px;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.completed{background:#d1fae5;color:#065f46}.status-badge.in-progress{background:#dbeafe;color:#1e40af}.status-badge.waiting{background:#fed7aa;color:#92400e}.action-description{color:var(--gray);font-size:.95rem;line-height:1.6;margin-bottom:15px}.action-footer{display:flex;justify-content:space-between;align-items:center;padding-top:15px;border-top:1px solid var(--light-gray)}.date{display:flex;align-items:center;gap:5px;color:var(--gray);font-size:.875rem}.action-buttons{display:flex;gap:10px}.action-btn{padding:8px 12px;background:var(--light-gray);border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;font-size:.875rem}.action-btn:hover{background:var(--primary);color:var(--white)}.action-btn.delete:hover{background:var(--danger)}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);justify-content:center;align-items:center;z-index:1000}.modal.active{display:flex;animation:fadeIn .3s ease}.modal-content{background:var(--white);border-radius:16px;padding:30px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;animation:slideUp .3s ease}.modal-header{margin-bottom:25px}.modal-header h2{color:var(--dark);font-size:1.8rem}.form-group{margin-bottom:20px}.form-group label{display:block;margin-bottom:8px;color:var(--dark);font-weight:500}.form-group input,.form-group select,.form-group textarea{width:100%;padding:12px;border:2px solid var(--light-gray);border-radius:8px;font-size:1rem;transition:border-color .3s ease}.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--primary)}.form-group textarea{resize:vertical;min-height:100px}.modal-buttons{display:flex;gap:15px;justify-content:flex-end;margin-top:25px}.modal-btn{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .2s ease}.modal-btn.cancel{background:var(--light-gray);color:var(--dark)}.modal-btn.cancel:hover{background:#e5e7eb}.modal-btn.save{background:var(--primary);color:var(--white)}.modal-btn.save:hover{background:var(--primary-dark)}@keyframes slideDown{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.backup-status{position:fixed;bottom:20px;right:20px;background:var(--white);padding:15px 20px;border-radius:12px;box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:15px;z-index:100;animation:slideUp .5s ease}.backup-status.warning{border-left:4px solid var(--warning)}.backup-status.success{border-left:4px solid var(--secondary)}.backup-status.danger{border-left:4px solid var(--danger)}.backup-info{flex:1}.backup-title{font-weight:600;color:var(--dark);margin-bottom:3px}.backup-time{font-size:.875rem;color:var(--gray)}.backup-btn{padding:8px 16px;background:var(--primary);color:var(--white);border:none;border-radius:8px;cursor:pointer;font-weight:500;transition:all .2s ease}.backup-btn:hover{background:var(--primary-dark);transform:translateY(-2px)}.backup-settings{position:fixed;top:20px;right:20px;background:var(--white);padding:20px;border-radius:12px;box-shadow:var(--shadow-lg);display:none;z-index:200;min-width:300px}.backup-settings.active{display:block;animation:slideDown .3s ease}.backup-settings h3{margin-bottom:15px;color:var(--dark);display:flex;justify-content:space-between;align-items:center}.close-settings{cursor:pointer;font-size:1.5rem;color:var(--gray);background:none;border:none}.backup-option{margin-bottom:15px;padding:10px;background:var(--light-gray);border-radius:8px}.backup-option label{display:flex;align-items:center;gap:10px;cursor:pointer;font-weight:500}.backup-option input[type=checkbox]{width:18px;height:18px;cursor:pointer}.backup-option input[type=number]{width:60px;padding:5px;border:1px solid var(--gray);border-radius:4px;margin-left:10px}.backup-history{margin-top:20px;padding-top:20px;border-top:1px solid var(--light-gray)}.backup-history h4{margin-bottom:10px;color:var(--dark)}.backup-list{max-height:200px;overflow-y:auto}.backup-item{display:flex;justify-content:space-between;align-items:center;padding:8px;margin-bottom:5px;background:var(--white);border:1px solid var(--light-gray);border-radius:6px;font-size:.875rem}.backup-item:hover{background:var(--light-gray)}.restore-btn{padding:4px 8px;background:var(--primary);color:var(--white);border:none;border-radius:4px;cursor:pointer;font-size:.75rem}.settings-toggle{position:fixed;top:20px;right:20px;padding:10px;background:var(--white);border-radius:50%;box-shadow:var(--shadow);cursor:pointer;border:none;font-size:1.2rem;z-index:150;transition:all .3s ease}.settings-toggle:hover{transform:rotate(90deg);box-shadow:var(--shadow-lg)}.notification{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--white);padding:30px;border-radius:16px;box-shadow:var(--shadow-lg);z-index:2000;display:none;text-align:center;min-width:350px}.notification.active{display:block;animation:fadeIn .3s ease}.notification h3{color:var(--dark);margin-bottom:15px}.notification p{color:var(--gray);margin-bottom:20px}.notification-buttons{display:flex;gap:10px;justify-content:center}.notification-btn{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:500}.notification-btn.primary{background:var(--primary);color:var(--white)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@media (max-width:768px){.header h1{font-size:1.8rem}.header-content{flex-direction:column;gap:15px}.stats-row{flex-direction:column}.actions-container{grid-template-columns:1fr}.controls-top{flex-direction:column}.search-box{width:100%}.export-buttons{width:100%;justify-content:center}.filter-section{flex-direction:column;align-items:flex-start}}
    </style>
</head>
<body>

    <div id="login-container">
        <div class="login-box">
            <h1>Aksiyon Takip Sistemi</h1>
            <input type="email" id="email" placeholder="E-posta" required>
            <input type="password" id="password" placeholder="Şifre" required>
            <button onclick="signIn()">Giriş Yap</button>
            <p id="login-error"></p>
        </div>
    </div>

    <div id="app-container" style="display: none;">
        <div class="container">
            <div class="header">
                <div class="header-content">
                    <h1>📋 Aksiyon Takip Sistemi</h1>
                    <div class="team-badges">
                        <div class="team-badge anadolu"><span>🏢</span><span>Anadolu Bakır</span></div>
                        <div class="team-badge aifteam"><span>💻</span><span>AIFTEAM</span></div>
                        <div class="team-badge ortak"><span>🤝</span><span>Ortak</span></div>
                    </div>
                </div>
                <p>Proje sorumlulukları ve aksiyonları yönetin</p>
            </div>
            <div class="stats-row">
                <div class="team-stats anadolu-stats">
                    <h3><span style="color: var(--anadolu);">🏢</span> Anadolu Bakır</h3>
                    <div class="stats-grid">
                        <div class="mini-stat"><div class="label">Toplam</div><div class="value" id="anadoluTotal">0</div></div>
                        <div class="mini-stat"><div class="label">Devam</div><div class="value" id="anadoluProgress">0</div></div>
                        <div class="mini-stat"><div class="label">Bekleyen</div><div class="value" id="anadoluWaiting">0</div></div>
                    </div>
                </div>
                <div class="team-stats aifteam-stats">
                    <h3><span style="color: var(--aifteam);">💻</span> AIFTEAM</h3>
                    <div class="stats-grid">
                        <div class="mini-stat"><div class="label">Toplam</div><div class="value" id="aifteamTotal">0</div></div>
                        <div class="mini-stat"><div class="label">Devam</div><div class="value" id="aifteamProgress">0</div></div>
                        <div class="mini-stat"><div class="label">Bekleyen</div><div class="value" id="aifteamWaiting">0</div></div>
                    </div>
                </div>
                <div class="team-stats ortak-stats">
                    <h3><span style="color: var(--ortak);">🤝</span> Ortak Aksiyonlar</h3>
                    <div class="stats-grid">
                        <div class="mini-stat"><div class="label">Toplam</div><div class="value" id="ortakTotal">0</div></div>
                        <div class="mini-stat"><div class="label">Devam</div><div class="value" id="ortakProgress">0</div></div>
                        <div class="mini-stat"><div class="label">Bekleyen</div><div class="value" id="ortakWaiting">0</div></div>
                    </div>
                </div>
            </div>
            <div class="controls">
                <div class="controls-top">
                    <div class="search-box"><input type="text" id="searchInput" placeholder="Aksiyon ara..."></div>
                    <button class="add-btn" onclick="openModal()">+ Yeni Aksiyon</button>
                    <div class="export-buttons">
                        <button class="export-btn excel" onclick="exportToExcel()"><span>📊</span> Excel'e Aktar</button>
                        <button class="export-btn word" onclick="exportToWord()"><span>📄</span> Word'e Aktar</button>
                        <button class="export-btn import" onclick="importBackup()"><span>📥</span> Yedek Yükle</button>
                    </div>
                </div>
                <div class="filter-section">
                    <span class="filter-label">Takım:</span>
                    <div class="team-filters">
                        <button class="team-filter-btn active all" data-team="all"><span>📊</span> Tümü</button>
                        <button class="team-filter-btn anadolu" data-team="Anadolu Bakır"><span>🏢</span> Anadolu Bakır</button>
                        <button class="team-filter-btn aifteam" data-team="AIFTEAM"><span>💻</span> AIFTEAM</button>
                        <button class="team-filter-btn ortak" data-team="Ortak"><span>🤝</span> Ortak</button>
                    </div>
                    <span class="filter-label">Durum:</span>
                    <div class="status-filters">
                        <button class="filter-btn active" data-filter="all">Tümü</button>
                        <button class="filter-btn" data-filter="completed">Tamamlandı</button>
                        <button class="filter-btn" data-filter="in-progress">Devam Ediyor</button>
                        <button class="filter-btn" data-filter="waiting">Bekliyor</button>
                    </div>
                    <div class="view-toggle">
                        <button class="view-btn" data-view="grid">Izgara</button>
                        <button class="view-btn active" data-view="grouped">Gruplu</button>
                    </div>
                </div>
            </div>
            <div class="actions-container" id="actionsContainer"></div>
        </div>
        <button class="settings-toggle" onclick="toggleBackupSettings()">⚙️</button>
        <div class="backup-status warning" id="backupStatus">
            <div class="backup-info">
                <div class="backup-title">Otomatik Yedekleme</div>
                <div class="backup-time" id="backupTime">Son yedek: Henüz alınmadı</div>
            </div>
            <button class="backup-btn" onclick="createBackup()">Şimdi Yedekle</button>
        </div>
        <div class="backup-settings" id="backupSettings">
            <h3>⚙️ Yedekleme Ayarları <button class="close-settings" onclick="toggleBackupSettings()">×</button></h3>
            <div class="backup-option"><label><input type="checkbox" id="autoBackup" checked onchange="updateBackupSettings()"> Otomatik Yedekleme Aktif</label></div>
            <div class="backup-option"><label>Her <input type="number" id="backupInterval" value="30" min="5" max="1440" onchange="updateBackupSettings()"> dakikada bir yedekle</label></div>
            <div class="backup-option"><label><input type="checkbox" id="backupOnChange" checked onchange="updateBackupSettings()"> Her 5 değişiklikte otomatik yedekle</label></div>
            <div class="backup-option"><label><input type="checkbox" id="dailyReminder" checked onchange="updateBackupSettings()"> Günlük yedekleme hatırlatıcısı (09:00)</label></div>
            <div class="backup-history">
                <h4>📁 Yedekleme Geçmişi</h4>
                <div class="backup-list" id="backupList"></div>
            </div>
            <div style="margin-top: 15px;"><button class="backup-btn" style="width: 100%;" onclick="exportAllBackups()">Tüm Yedekleri İndir</button></div>
        </div>
        <div class="notification" id="backupNotification">
            <h3>⏰ Yedekleme Zamanı!</h3>
            <p>Verilerinizi güvende tutmak için yedekleme yapmanızı öneririz.</p>
            <div class="notification-buttons">
                <button class="notification-btn primary" onclick="createBackupFromNotification()">Şimdi Yedekle</button>
                <button class="notification-btn secondary" onclick="dismissNotification()">Sonra Hatırlat</button>
            </div>
        </div>
        <div class="modal" id="actionModal">
            <div class="modal-content">
                <div class="modal-header"><h2 id="modalTitle">Yeni Aksiyon Ekle</h2></div>
                <form id="actionForm">
                    <div class="form-group"><label for="actionTitle">Başlık *</label><input type="text" id="actionTitle" required></div>
                    <div class="form-group"><label for="actionResponsible">Sorumlu *</label><select id="actionResponsible" required><option value="">Seçiniz...</option><option value="Anadolu Bakır">Anadolu Bakır</option><option value="AIFTEAM">AIFTEAM</option><option value="Ortak - AIFTEAM/Anadolu Bakır">Ortak - AIFTEAM/Anadolu Bakır</option></select></div>
                    <div class="form-group"><label for="actionDescription">Açıklama *</label><textarea id="actionDescription" required></textarea></div>
                    <div class="form-group"><label for="actionStatus">Durum *</label><select id="actionStatus" required><option value="waiting">Bekliyor</option><option value="in-progress">Devam Ediyor</option><option value="completed">Tamamlandı</option></select></div>
                    <div class="form-group"><label for="actionDate">Hedef Tarih</label><input type="date" id="actionDate"></div>
                    <div class="modal-buttons"><button type="button" class="modal-btn cancel" onclick="closeModal()">İptal</button><button type="submit" class="modal-btn save">Kaydet</button></div>
                </form>
            </div>
        </div>

        <button onclick="signOut()" style="position: fixed; top: 30px; right: 30px; padding: 10px 20px; background-color: #ef4444; color: white; border: none; border-radius: 8px; cursor: pointer; z-index: 2000; font-weight: 600;">
            Çıkış Yap
        </button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <script>
        // 1. ADIM: Firebase projenizin ayarlarından kopyaladığınız config kodunu buraya yapıştırın.
        const firebaseConfig = {
          apiKey: "AIzaSyAFc4_sZ-gVimMsBUjQ-RGwJ90yQyxA0zI",
          authDomain: "aksiyon-takip.firebaseapp.com",
          projectId: "aksiyon-takip",
          storageBucket: "aksiyon-takip.firebasestorage.app",
          messagingSenderId: "692213499754",
          appId: "1:692213499754:web:2fea07badfd8eb7c978713",
          measurementId: "G-0G4J1DL3TL"
        };

        // Firebase'i başlat
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // --- Firebase Kimlik Doğrulama Fonksiyonları ---
        const loginContainer = document.getElementById('login-container');
        const appContainer = document.getElementById('app-container');
        const loginError = document.getElementById('login-error');

        function signIn() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            loginError.textContent = "";
            if (!email || !password) {
                loginError.textContent = "E-posta ve şifre alanları boş bırakılamaz.";
                return;
            }
            auth.signInWithEmailAndPassword(email, password)
                .catch((error) => {
                    console.error("Giriş hatası:", error);
                    loginError.textContent = "Hatalı e-posta veya şifre.";
                });
        }

        function signOut() {
            auth.signOut();
        }

        auth.onAuthStateChanged((user) => {
            if (user) {
                loginContainer.style.display = 'none';
                document.body.style.padding = '20px';
                appContainer.style.display = 'block';
            } else {
                loginContainer.style.display = 'flex';
                document.body.style.padding = '0';
                appContainer.style.display = 'none';
            }
        });
    </script>
    
    <script>
        let actions = [];
        let editingId = null;
        let currentStatusFilter = 'all';
        let currentTeamFilter = 'all';
        let currentView = 'grouped';
        let changeCount = 0;
        let lastBackupTime = null;
        let backupHistory = [];
        let backupSettings = {
            autoBackup: true,
            backupInterval: 30,
            backupOnChange: true,
            dailyReminder: true
        };
        let backupTimer = null;
        const defaultActions = [ { id: 1001, title: "Vergi Grup Uyarlaması", responsible: "Anadolu Bakır", description: "Vergi grupları ve hesap planı yapısı netleştirilmelidir.", status: "waiting", date: "" }, { id: 1002, title: "Stok Kartı Aktarımı", responsible: "Anadolu Bakır", description: "Kalem kodları belirlenmeli ve AIFTEAM tarafından sağlanan stok ana veri aktarım şablonu doldurulmalıdır.", status: "waiting", date: "" }, { id: 1003, title: "Muhatap Kartı Aktarımı", responsible: "Anadolu Bakır", description: "Muhatap kodları belirlenmelidir.", status: "waiting", date: "" }, { id: 1004, title: "Ürün Reçetelerinin Aktarımı", responsible: "Anadolu Bakır", description: "Cep ve ara depolar belirlenmeli ve ürün reçetesi aktarım şablonu doldurulmalıdır.", status: "waiting", date: "" }, { id: 1005, title: "Hesap Planı Yapısı", responsible: "Anadolu Bakır", description: "Başlatılan ön hesap planı çalışması tamamlanmalı ve AIFTEAM'e geri dönüş yapılmalıdır.", status: "waiting", date: "" }, { id: 1006, title: "Depo Uyarlamaları", responsible: "Anadolu Bakır", description: "Cep ve ara depo talepleri netleştirilerek AIFTEAM'e bildirilmelidir.", status: "waiting", date: "" }, { id: 1007, title: "E-Dönüşüm", responsible: "Anadolu Bakır", description: "Çalışılacak entegratör firma belirlenmeli ve entegratör/şirket bilgileri AIFTEAM'e iletilmelidir.", status: "waiting", date: "" }, { id: 1008, title: "Personellere İlişkin Bilgiler (Muhasebe)", responsible: "Anadolu Bakır", description: "İstenen geliştirme için örnek bir şablon AIFTEAM ile paylaşılmalıdır.", status: "waiting", date: "" }, { id: 1009, title: "Sanayi Sicil İşletme Cetveli (Muhasebe)", responsible: "Anadolu Bakır", description: "Rapor için örnek bir şablon ve alan açıklamaları AIFTEAM'e sağlanmalıdır.", status: "waiting", date: "" }, { id: 1010, title: "Dahilde İşlem Takibi (Muhasebe)", responsible: "Anadolu Bakır", description: "İstenen rapor için örnek bir şablon AIFTEAM ile paylaşılmalıdır.", status: "waiting", date: "" }, { id: 1011, title: "DBS Limit Takibi (Finans)", responsible: "Anadolu Bakır", description: "Entegrasyonun gerçekleştirilebilmesi için Anadolu Bakır firmasının Bulut Tahsilat anlaşması yapması gerekmektedir.", status: "waiting", date: "" }, { id: 1012, title: "Nakit Akış Raporu (Raporlar)", responsible: "Anadolu Bakır", description: "Mevcut kullanılan nakit akış excel dosyaları AIFTEAM'e gönderilmelidir. (Mail olarak istendi bekleniyor.)", status: "waiting", date: "" }, { id: 1013, title: "Çek–Senet / Teminat / Kredi Raporları", responsible: "Anadolu Bakır", description: "Talep edilen raporlar için şablonlar (içerik ve format beklentisi) AIFTEAM ile paylaşılmalıdır.", status: "waiting", date: "" }, { id: 1014, title: "Palet ve Rulo Etiket Tasarımları (Üretim)", responsible: "Anadolu Bakır", description: "Anadolu Bakır içerisinde ZPL Designer kullanacak personellerin bulunması gerekmektedir. Palet ve Rulo tüm etiket tasarımları AIFTeam ekibi ile paylaşılmalıdır.", status: "waiting", date: "" }, { id: 1015, title: "Palet Yapma (İhracat)", responsible: "Anadolu Bakır", description: "Palet oluşturma senaryoları (taşıma türüne göre vb.) netleştirilerek AIFTEAM'e aktarılmalıdır.", status: "waiting", date: "" }, { id: 1016, title: "Fiyat Listesi (İhracat)", responsible: "Anadolu Bakır", description: "Anadolu Bakır tarafından Bakır kalemler fiyat listesinin paylaşılması gerekmektedir. Kalem birimi bazında fiyatlarının oluşturulması Anadolu Bakır tarafından yapılacaktır. Kalem fiyatlarının SAP B1 sistemine aktarımı AIFTeam tarafından yapılacaktır.", status: "waiting", date: "" }, { id: 1017, title: "Kur Entegrasyonu (Yurt İçi Satış)", responsible: "Anadolu Bakır", description: "İş Bankası API bilgileri temin edilerek AIFTEAM'e sağlanmalıdır.", status: "waiting", date: "" }, { id: 1018, title: "Satınalma Raporları", responsible: "Anadolu Bakır", description: "\"Nakliye Satınalma Teklif Başarı\", \"Personel Performans\" ve \"Geçmiş Alım Karşılaştırma\" raporları için beklenen başlıklar ve içerikler AIFTEAM ile paylaşılmalıdır.", status: "waiting", date: "" }, { id: 1019, title: "El Terminali Uygulaması", responsible: "Anadolu Bakır", description: "Kullanıcıların RDP erişimine uygun tablet, telefon gibi cihazlara sahip olduğundan emin olunmalıdır.", status: "waiting", date: "" }, { id: 1020, title: "Satınalma Sipariş ve Satıcı Faturası Ekranı (WEB)", responsible: "Anadolu Bakır", description: "İlgili web geliştirmeler için E-Flow Test ortamı Anadolu Bakır'dan talep edilecektir.", status: "waiting", date: "" }, { id: 1021, title: "Toplantı Geri Bildirimi", responsible: "Anadolu Bakır", description: "17.09.2025'de yapılan toplantı sonucunda Hesap Planı ve Kalem Kodu, 18.09.2025'te Anadolu Bakır'ın kendi iç yönetiminde yapacağı toplantı sonrasında netleşip aynı gün içerisinde AIFTeam'e geri dönüş yapılacaktır.", status: "waiting", date: "2025-09-18" }, { id: 2001, title: "Hesap Planı Yapısı", responsible: "AIFTEAM", description: "Anadolu Bakır'a gönderilen mailin takibi yapılmalı ve hesap planı çalışmasının tamamlanması beklenmelidir.", status: "waiting", date: "" }, { id: 2002, title: "Muhatap Kartı Aktarımı", responsible: "AIFTEAM", description: "Emre Pirinç tarafından Muhatap ana veri şablonu tamamlanmalıdır. (Ödeme Koşulları ve eksik alanlar kontrol edilecektir Mustafa Bey ile.)", status: "waiting", date: "" }, { id: 2003, title: "Sanayi Sicil İşletme Cetveli (Muhasebe)", responsible: "AIFTEAM", description: "Rapor şablonu ve alanların anlamları hakkında Anadolu Bakır'a mail gönderilmelidir.", status: "waiting", date: "" }, { id: 2004, title: "Döviz Bazında Mizan (Finans)", responsible: "AIFTEAM", description: "Döviz bazında maliyet konusunun nasıl işleneceği netleştirilmeli ve yazılım geliştirme planlaması yapılmalıdır.", status: "waiting", date: "" }, { id: 2005, title: "Ödeme Planı (Finans)", responsible: "AIFTEAM", description: "Murat Yenişen ile web geliştirme çalışması için bir görüşme planlanmalıdır. SAP B1 sisteminde bulunan alış faturalarının bakiyelerinin görüntülendiği ve cari ekstrenin yüklenebildiği, onay kurgusu içeren bir WEB geliştirme yapılacaktır. E-Flow konusunda ödeme listesinin net olarak alınıp alınmayacağı AIFTeam tarafından netleştirilecektir. Bu kapsamda, ödeme listesine dair test verisi içeren bir kullanıcı talep edilerek detaylar incelenecektir.", status: "waiting", date: "" }, { id: 2006, title: "Nakit Akış Raporu (Raporlar)", responsible: "AIFTEAM", description: "Standart Nakit Akış, çek ve kredi raporlarının detayları araştırılmalıdır.", status: "waiting", date: "" }, { id: 2007, title: "Net Tahsilat Entegrasyonu (Finans)", responsible: "AIFTEAM", description: "Entegrasyon için API hazırlıkları yapılmalı ve Anadolu Bakır ile planlaması gerçekleştirilmelidir.", status: "waiting", date: "" }, { id: 2008, title: "Dönem Sonu Maliyet Hesaplama (Üretim)", responsible: "AIFTEAM", description: "Murat Yenişen ile yapılacak çalışma için bir görüşme planlanmalıdır.", status: "waiting", date: "" }, { id: 2009, title: "Fiyat Listesi (İhracat)", responsible: "AIFTEAM", description: "Anadolu Bakır'dan gelen fiyat listesi mailleri incelenerek fiyatların nasıl hesaplandığı netleştirilmelidir.", status: "waiting", date: "" }, { id: 2010, title: "Satınalma Sipariş ve Satıcı Faturası Ekranı (WEB)", responsible: "AIFTEAM", description: "Geliştirme öncesinde onay için Wireframe tasarımları hazırlanıp Anadolu Bakır'a sunulmalıdır.", status: "waiting", date: "" }, { id: 3001, title: "Outlook Entegrasyonu", responsible: "Ortak - AIFTEAM/Anadolu Bakır", description: "Murat Bey ile talep edilen entegrasyonun (mailden link ile belge oluşturma) detaylarını görüşmek üzere bir toplantı ayarlanmalıdır.", status: "waiting", date: "" }, { id: 3002, title: "SAP B1 Üzerinden Mail Gönderimi", responsible: "Ortak - AIFTEAM/Anadolu Bakır", description: "Mail gönderim senaryoları (hangi durumda kime mail atılacağı vb.) netleştirilmelidir.", status: "waiting", date: "" }, { id: 3003, title: "Satınalma Sipariş Ekranı (WEB)", responsible: "Ortak - AIFTEAM/Anadolu Bakır", description: "Onay senaryoları ve iş akışları netleştirilmelidir.", status: "waiting", date: "" } ];
        function initBackupSystem(){const e=localStorage.getItem("backupSettings");if(e){backupSettings=JSON.parse(e);document.getElementById("autoBackup").checked=backupSettings.autoBackup;document.getElementById("backupInterval").value=backupSettings.backupInterval;document.getElementById("backupOnChange").checked=backupSettings.backupOnChange;document.getElementById("dailyReminder").checked=backupSettings.dailyReminder}const t=localStorage.getItem("backupHistory");if(t){backupHistory=JSON.parse(t);updateBackupHistory()}const a=localStorage.getItem("lastBackupTime");if(a){lastBackupTime=new Date(a);updateBackupStatus()}if(backupSettings.autoBackup){startBackupTimer()}checkDailyReminder()}function createBackup(e=false){const t={version:"1.0",timestamp:(new Date).toISOString(),actions:actions,stats:{total:actions.length,completed:actions.filter(e=>"completed"===e.status).length,inProgress:actions.filter(e=>"in-progress"===e.status).length,waiting:actions.filter(e=>"waiting"===e.status).length}};const a={id:Date.now(),date:(new Date).toISOString(),actionCount:actions.length,size:JSON.stringify(t).length};if(backupHistory.unshift(a),backupHistory.length>10){backupHistory=backupHistory.slice(0,10)}localStorage.setItem("backup_"+a.id,JSON.stringify(t));localStorage.setItem("backupHistory",JSON.stringify(backupHistory));localStorage.setItem("lastBackupTime",a.date);lastBackupTime=new Date(a.date);updateBackupStatus();updateBackupHistory();if(!e){downloadBackup(t);showSuccessMessage("Yedekleme başarıyla oluşturuldu!")}changeCount=0}function downloadBackup(e){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});const a=URL.createObjectURL(t);const n=document.createElement("a");const o=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5);n.href=a;n.download=`Aksiyon_Yedek_${o}.json`;document.body.appendChild(n);n.click();document.body.removeChild(n);URL.revokeObjectURL(a)}function restoreBackup(e){if(confirm("Bu yedeği geri yüklemek istediğinizden emin misiniz? Mevcut veriler kaybolacak!")){const t=localStorage.getItem("backup_"+e);if(t){const e=JSON.parse(t);actions=e.actions;saveActions();renderActions();updateStats();showSuccessMessage("Yedek başarıyla geri yüklendi!")}}}function updateBackupStatus(){const e=document.getElementById("backupStatus");const t=document.getElementById("backupTime");if(lastBackupTime){const a=(new Date);const n=Math.floor((a-lastBackupTime)/1e3/60);if(n<30){e.className="backup-status success";t.textContent=`Son yedek: ${n} dakika önce`}else if(n<60){e.className="backup-status warning";t.textContent=`Son yedek: ${n} dakika önce`}else if(n<1440){e.className="backup-status warning";const a=Math.floor(n/60);t.textContent=`Son yedek: ${a} saat önce`}else{e.className="backup-status danger";const a=Math.floor(n/1440);t.textContent=`Son yedek: ${a} gün önce`}}else{e.className="backup-status warning";t.textContent="Son yedek: Henüz alınmadı"}}function updateBackupHistory(){const e=document.getElementById("backupList");if(0===backupHistory.length){e.innerHTML='<div style="text-align: center; color: #999;">Henüz yedek yok</div>';return}e.innerHTML=backupHistory.map(e=>{const t=new Date(e.date);const a=t.toLocaleDateString("tr-TR")+" "+t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});const n=Math.round(e.size/1024);return`
                    <div class="backup-item">
                        <div>
                            <div style="font-weight: 500;">${a}</div>
                            <div style="font-size: 0.75rem; color: #999;">${e.actionCount} aksiyon, ${n}KB</div>
                        </div>
                        <button class="restore-btn" onclick="restoreBackup(${e.id})">Geri Yükle</button>
                    </div>
                `}).join("")}function toggleBackupSettings(){const e=document.getElementById("backupSettings");e.classList.toggle("active")}function updateBackupSettings(){backupSettings={autoBackup:document.getElementById("autoBackup").checked,backupInterval:parseInt(document.getElementById("backupInterval").value),backupOnChange:document.getElementById("backupOnChange").checked,dailyReminder:document.getElementById("dailyReminder").checked};localStorage.setItem("backupSettings",JSON.stringify(backupSettings));if(backupTimer){clearInterval(backupTimer)}if(backupSettings.autoBackup){startBackupTimer()}}function startBackupTimer(){if(backupTimer){clearInterval(backupTimer)}backupTimer=setInterval(()=>{if(backupSettings.autoBackup){createBackup(true);showSuccessMessage("Otomatik yedekleme tamamlandı")}},backupSettings.backupInterval*60*1e3)}function checkDailyReminder(){if(!backupSettings.dailyReminder)return;const e=new Date;const t=localStorage.getItem("lastReminderDate");const a=e.toDateString();if(t!==a&&e.getHours()>=9){showBackupNotification();localStorage.setItem("lastReminderDate",a)}setTimeout(checkDailyReminder,18e5)}function showBackupNotification(){document.getElementById("backupNotification").classList.add("active")}function createBackupFromNotification(){dismissNotification();createBackup()}function dismissNotification(){document.getElementById("backupNotification").classList.remove("active")}function exportAllBackups(){const e=[];backupHistory.forEach(t=>{const a=localStorage.getItem("backup_"+t.id);if(a){e.push({...t,data:JSON.parse(a)})}});const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});const a=URL.createObjectURL(t);const n=document.createElement("a");const o=(new Date).toISOString().split("T")[0];n.href=a;n.download=`Tum_Yedekler_${o}.json`;document.body.appendChild(n);n.click();document.body.removeChild(n);URL.revokeObjectURL(a);showSuccessMessage("Tüm yedekler indirildi!")}function trackChanges(){changeCount++;if(backupSettings.backupOnChange&&changeCount>=5){createBackup(true);showSuccessMessage("Otomatik yedekleme (5 değişiklik) tamamlandı")}}function showSuccessMessage(e){const t=document.createElement("div");t.style.cssText=`
                position: fixed;
                top: 80px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 3000;
                animation: slideDown 0.3s ease;
            `;t.textContent=e;document.body.appendChild(t);setTimeout(()=>{t.style.animation="slideUp 0.3s ease";setTimeout(()=>{document.body.removeChild(t)},300)},3e3)}function importBackup(){const e=document.createElement("input");e.type="file";e.accept=".json";e.onchange=function(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=function(e){try{const t=JSON.parse(e.target.result);if(Array.isArray(t)){if(confirm("Bu dosyada "+t.length+" yedek bulundu. Tümünü içe aktarmak istiyor musunuz?")){t.forEach(e=>{localStorage.setItem("backup_"+e.id,JSON.stringify(e.data))});const e=t.map(e=>({id:e.id,date:e.date,actionCount:e.actionCount,size:e.size}));backupHistory=[...e,...backupHistory].slice(0,10);localStorage.setItem("backupHistory",JSON.stringify(backupHistory));updateBackupHistory();showSuccessMessage("Yedekler başarıyla içe aktarıldı!")}}else if(t.version&&t.actions){if(confirm("Bu yedeği geri yüklemek istiyor musunuz? Mevcut veriler kaybolacak!")){actions=t.actions;saveActions();renderActions();updateStats();createBackup(true);showSuccessMessage("Yedek başarıyla geri yüklendi!")}}else{alert("Geçersiz yedek dosyası!")}}catch(e){alert("Dosya okunamadı: "+e.message)}};a.readAsText(t)};e.click()}function loadActions(){const e=localStorage.getItem("actions");if(e){actions=JSON.parse(e)}else{actions=[...defaultActions];saveActions()}renderActions();updateStats()}function saveActions(){localStorage.setItem("actions",JSON.stringify(actions));trackChanges()}function getTeamType(e){if(e.includes("Ortak"))return"ortak";if("AIFTEAM"===e)return"aifteam";if("Anadolu Bakır"===e)return"anadolu";return"other"}function updateStats(){const e=actions.filter(e=>"Anadolu Bakır"===e.responsible);document.getElementById("anadoluTotal").textContent=e.length;document.getElementById("anadoluProgress").textContent=e.filter(e=>"in-progress"===e.status).length;document.getElementById("anadoluWaiting").textContent=e.filter(e=>"waiting"===e.status).length;const t=actions.filter(e=>"AIFTEAM"===e.responsible);document.getElementById("aifteamTotal").textContent=t.length;document.getElementById("aifteamProgress").textContent=t.filter(e=>"in-progress"===e.status).length;document.getElementById("aifteamWaiting").textContent=t.filter(e=>"waiting"===e.status).length;const a=actions.filter(e=>e.responsible.includes("Ortak"));document.getElementById("ortakTotal").textContent=a.length;document.getElementById("ortakProgress").textContent=a.filter(e=>"in-progress"===e.status).length;document.getElementById("ortakWaiting").textContent=a.filter(e=>"waiting"===e.status).length}function renderActions(){const e=document.getElementById("actionsContainer");const t=document.getElementById("searchInput").value.toLowerCase();let a=actions;if("all"!==currentTeamFilter){a="Ortak"===currentTeamFilter?a.filter(e=>e.responsible.includes("Ortak")):a.filter(e=>e.responsible===currentTeamFilter)}if("all"!==currentStatusFilter){a=a.filter(e=>e.status===currentStatusFilter)}if(t){a=a.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.responsible.toLowerCase().includes(t))}if("grouped"===currentView){const t={anadolu:a.filter(e=>"Anadolu Bakır"===e.responsible),aifteam:a.filter(e=>"AIFTEAM"===e.responsible),ortak:a.filter(e=>e.responsible.includes("Ortak"))};e.className="actions-container grouped";e.innerHTML="";if(t.anadolu.length>0){e.innerHTML+=`
                        <div class="team-section">
                            <div class="team-header anadolu">
                                <h2>🏢 Anadolu Bakır</h2>
                                <span>${t.anadolu.length} aksiyon</span>
                            </div>
                            <div class="team-actions">
                                ${t.anadolu.map(e=>createActionCard(e)).join("")}
                            </div>
                        </div>
                    `}if(t.aifteam.length>0){e.innerHTML+=`
                        <div class="team-section">
                            <div class="team-header aifteam">
                                <h2>💻 AIFTEAM</h2>
                                <span>${t.aifteam.length} aksiyon</span>
                            </div>
                            <div class="team-actions">
                                ${t.aifteam.map(e=>createActionCard(e)).join("")}
                            </div>
                        </div>
                    `}if(t.ortak.length>0){e.innerHTML+=`
                        <div class="team-section">
                            <div class="team-header ortak">
                                <h2>🤝 Ortak Aksiyonlar</h2>
                                <span>${t.ortak.length} aksiyon</span>
                            </div>
                            <div class="team-actions">
                                ${t.ortak.map(e=>createActionCard(e)).join("")}
                            </div>
                        </div>
                    `}}else{e.className="actions-container";e.innerHTML=a.map(e=>createActionCard(e)).join("")}if(0===a.length){e.innerHTML=`
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; background: white; border-radius: 12px;">
                        <p style="color: #6b7280; font-size: 1.1rem;">Aksiyon bulunamadı</p>
                    </div>
                `}}function createActionCard(e){const t=getTeamType(e.responsible);const a="anadolu"===t?"🏢":"aifteam"===t?"💻":"🤝";return`
                <div class="action-card ${t}">
                    <div class="action-header">
                        <div>
                            <div class="action-title">${e.title}</div>
                            <div class="responsible">
                                ${a} ${e.responsible}
                                <span class="responsible-badge ${t}">`+("anadolu"===t?"AB":"aifteam"===t?"AIF":"ORT")+`</span>
                            </div>
                        </div>
                        <span class="status-badge ${e.status}">${getStatusText(e.status)}</span>
                    </div>
                    <div class="action-description">${e.description}</div>
                    <div class="action-footer">
                        <div class="date">
                            📅 `+(e.date?formatDate(e.date):"Tarih belirtilmemiş")+`
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn" onclick="editAction(${e.id})">Düzenle</button>
                            <button class="action-btn delete" onclick="deleteAction(${e.id})">Sil</button>
                        </div>
                    </div>
                </div>
            `}function getStatusText(e){return{completed:"Tamamlandı","in-progress":"Devam Ediyor",waiting:"Bekliyor"}[e]||e}function formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getDate()} ${["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"][t.getMonth()]} ${t.getFullYear()}`}function openModal(){document.getElementById("actionModal").classList.add("active");document.getElementById("modalTitle").textContent="Yeni Aksiyon Ekle";document.getElementById("actionForm").reset();editingId=null}function closeModal(){document.getElementById("actionModal").classList.remove("active");editingId=null}function editAction(e){const t=actions.find(t=>t.id===e);if(!t)return;editingId=e;document.getElementById("modalTitle").textContent="Aksiyonu Düzenle";document.getElementById("actionTitle").value=t.title;document.getElementById("actionResponsible").value=t.responsible;document.getElementById("actionDescription").value=t.description;document.getElementById("actionStatus").value=t.status;document.getElementById("actionDate").value=t.date||"";document.getElementById("actionModal").classList.add("active")}function deleteAction(e){if(confirm("Bu aksiyonu silmek istediğinizden emin misiniz?")){actions=actions.filter(t=>t.id!==e);saveActions();renderActions();updateStats()}}document.getElementById("actionForm").addEventListener("submit",e=>{e.preventDefault();const t={title:document.getElementById("actionTitle").value,responsible:document.getElementById("actionResponsible").value,description:document.getElementById("actionDescription").value,status:document.getElementById("actionStatus").value,date:document.getElementById("actionDate").value};if(editingId){const e=actions.findIndex(e=>e.id===editingId);if(-1!==e){actions[e]={...actions[e],...t}}}else{actions.push({id:Date.now(),...t})}saveActions();renderActions();updateStats();closeModal()});document.getElementById("searchInput").addEventListener("input",renderActions);document.querySelectorAll(".team-filter-btn").forEach(e=>{e.addEventListener("click",t=>{document.querySelectorAll(".team-filter-btn").forEach(e=>e.classList.remove("active"));t.currentTarget.classList.add("active");t.currentTarget.classList.add("all"===t.currentTarget.dataset.team?"all":"Anadolu Bakır"===t.currentTarget.dataset.team?"anadolu":"AIFTEAM"===t.currentTarget.dataset.team?"aifteam":"ortak");currentTeamFilter=t.currentTarget.dataset.team;renderActions()})});document.querySelectorAll(".filter-btn").forEach(e=>{e.addEventListener("click",t=>{document.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active"));t.target.classList.add("active");currentStatusFilter=t.target.dataset.filter;renderActions()})});document.querySelectorAll(".view-btn").forEach(e=>{e.addEventListener("click",t=>{document.querySelectorAll(".view-btn").forEach(e=>e.classList.remove("active"));t.target.classList.add("active");currentView=t.target.dataset.view;renderActions()})});document.getElementById("actionModal").addEventListener("click",e=>{if("actionModal"===e.target.id){closeModal()}});function exportToExcel(){const e=actions.map(e=>({ID:e.id,Başlık:e.title,Sorumlu:e.responsible,Açıklama:e.description,Durum:getStatusText(e.status),"Hedef Tarih":e.date||"Belirtilmemiş",Takım:"Anadolu Bakır"===e.responsible?"Anadolu Bakır":"AIFTEAM"===e.responsible?"AIFTEAM":"Ortak"}));const t=XLSX.utils.book_new();const a=XLSX.utils.json_to_sheet(e);const n=[{wch:8},{wch:35},{wch:25},{wch:60},{wch:15},{wch:15},{wch:15}];a["!cols"]=n;XLSX.utils.book_append_sheet(t,a,"Tüm Aksiyonlar");const o=e.filter(e=>"Anadolu Bakır"===e.Takım);if(o.length>0){const e=XLSX.utils.json_to_sheet(o);e["!cols"]=n;XLSX.utils.book_append_sheet(t,e,"Anadolu Bakır")}const i=e.filter(e=>"AIFTEAM"===e.Takım);if(i.length>0){const e=XLSX.utils.json_to_sheet(i);e["!cols"]=n;XLSX.utils.book_append_sheet(t,e,"AIFTEAM")}const r=e.filter(e=>"Ortak"===e.Takım);if(r.length>0){const e=XLSX.utils.json_to_sheet(r);e["!cols"]=n;XLSX.utils.book_append_sheet(t,e,"Ortak")}const l=[{Takım:"Anadolu Bakır",Toplam:o.length,Tamamlanan:o.filter(e=>"Tamamlandı"===e.Durum).length,"Devam Eden":o.filter(e=>"Devam Ediyor"===e.Durum).length,Bekleyen:o.filter(e=>"Bekliyor"===e.Durum).length},{Takım:"AIFTEAM",Toplam:i.length,Tamamlanan:i.filter(e=>"Tamamlandı"===e.Durum).length,"Devam Eden":i.filter(e=>"Devam Ediyor"===e.Durum).length,Bekleyen:i.filter(e=>"Bekliyor"===e.Durum).length},{Takım:"Ortak",Toplam:r.length,Tamamlanan:r.filter(e=>"Tamamlandı"===e.Durum).length,"Devam Eden":r.filter(e=>"Devam Ediyor"===e.Durum).length,Bekleyen:r.filter(e=>"Bekliyor"===e.Durum).length}];const s=XLSX.utils.json_to_sheet(l);s["!cols"]=[{wch:20},{wch:10},{wch:12},{wch:12},{wch:12}];XLSX.utils.book_append_sheet(t,s,"İstatistikler");const c=(new Date).toISOString().split("T")[0];XLSX.writeFile(t,`Aksiyon_Takip_${c}.xlsx`)}function exportToWord(){const e=actions.filter(e=>"Anadolu Bakır"===e.responsible);const t=actions.filter(e=>"AIFTEAM"===e.responsible);const a=actions.filter(e=>e.responsible.includes("Ortak"));const n=(new Date).toLocaleDateString("tr-TR");let o=`
                <html xmlns:o='urn:schemas-microsoft-com:office:office' 
                      xmlns:w='urn:schemas-microsoft-com:office:word'
                      xmlns='http://www.w3.org/TR/REC-html40'>
                <head>
                    <meta charset='utf-8'>
                    <title>Aksiyon Takip Raporu</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            line-height: 1.6;
                            color: #333;
                            margin: 20px;
                        }
                        h1 {
                            color: #2c3e50;
                            border-bottom: 3px solid #3498db;
                            padding-bottom: 10px;
                            margin-bottom: 20px;
                        }
                        h2 {
                            color: #34495e;
                            background-color: #ecf0f1;
                            padding: 10px;
                            margin-top: 30px;
                            margin-bottom: 15px;
                        }
                        .stats-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 30px;
                        }
                        .stats-table th, .stats-table td {
                            border: 1px solid #ddd;
                            padding: 10px;
                            text-align: left;
                        }
                        .stats-table th {
                            background-color: #3498db;
                            color: white;
                        }
                        .stats-table tr:nth-child(even) {
                            background-color: #f9f9f9;
                        }
                        .action-item {
                            margin-bottom: 20px;
                            padding: 15px;
                            border: 1px solid #ddd;
                            background-color: #f9f9f9;
                            page-break-inside: avoid;
                        }
                        .action-title {
                            font-weight: bold;
                            color: #2c3e50;
                            font-size: 16px;
                            margin-bottom: 8px;
                        }
                        .action-field {
                            margin: 5px 0;
                        }
                        .field-label {
                            font-weight: bold;
                            color: #666;
                            display: inline-block;
                            width: 100px;
                        }
                        .status {
                            display: inline-block;
                            padding: 3px 8px;
                            border-radius: 4px;
                            font-size: 12px;
                            font-weight: bold;
                        }
                        .status.completed {
                            background-color: #27ae60;
                            color: white;
                        }
                        .status.in-progress {
                            background-color: #3498db;
                            color: white;
                        }
                        .status.waiting {
                            background-color: #f39c12;
                            color: white;
                        }
                        .team-anadolu {
                            border-left: 4px solid #e74c3c;
                        }
                        .team-aifteam {
                            border-left: 4px solid #3498db;
                        }
                        .team-ortak {
                            border-left: 4px solid #9b59b6;
                        }
                        @page {
                            margin: 2cm;
                        }
                    </style>
                </head>
                <body>
                    <h1>📋 Aksiyon Takip Raporu</h1>
                    <p><strong>Rapor Tarihi:</strong> ${n}</p>
                    
                    <h2>📊 Özet İstatistikler</h2>
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>Takım</th>
                                <th>Toplam</th>
                                <th>Tamamlanan</th>
                                <th>Devam Eden</th>
                                <th>Bekleyen</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Anadolu Bakır</td>
                                <td>${e.length}</td>
                                <td>${e.filter(e=>"completed"===e.status).length}</td>
                                <td>${e.filter(e=>"in-progress"===e.status).length}</td>
                                <td>${e.filter(e=>"waiting"===e.status).length}</td>
                            </tr>
                            <tr>
                                <td>AIFTEAM</td>
                                <td>${t.length}</td>
                                <td>${t.filter(e=>"completed"===e.status).length}</td>
                                <td>${t.filter(e=>"in-progress"===e.status).length}</td>
                                <td>${t.filter(e=>"waiting"===e.status).length}</td>
                            </tr>
                            <tr>
                                <td>Ortak</td>
                                <td>${a.length}</td>
                                <td>${a.filter(e=>"completed"===e.status).length}</td>
                                <td>${a.filter(e=>"in-progress"===e.status).length}</td>
                                <td>${a.filter(e=>"waiting"===e.status).length}</td>
                            </tr>
                            <tr style="font-weight: bold; background-color: #ecf0f1;">
                                <td>TOPLAM</td>
                                <td>${actions.length}</td>
                                <td>${actions.filter(e=>"completed"===e.status).length}</td>
                                <td>${actions.filter(e=>"in-progress"===e.status).length}</td>
                                <td>${actions.filter(e=>"waiting"===e.status).length}</td>
                            </tr>
                        </tbody>
                    </table>
            `;if(e.length>0){o+=`<h2>🏢 Anadolu Bakır Aksiyonları (${e.length})</h2>`;e.forEach(e=>{o+=`
                        <div class="action-item team-anadolu">
                            <div class="action-title">${e.title}</div>
                            <div class="action-field">
                                <span class="field-label">Durum:</span>
                                <span class="status ${e.status}">${getStatusText(e.status)}</span>
                            </div>
                            <div class="action-field">
                                <span class="field-label">Tarih:</span>
                                `+(e.date?formatDate(e.date):"Belirtilmemiş")+`
                            </div>
                            <div class="action-field">
                                <span class="field-label">Açıklama:</span><br>
                                ${e.description}
                            </div>
                        </div>
                    `})}if(t.length>0){o+=`<h2>💻 AIFTEAM Aksiyonları (${t.length})</h2>`;t.forEach(e=>{o+=`
                        <div class="action-item team-aifteam">
                            <div class="action-title">${e.title}</div>
                            <div class="action-field">
                                <span class="field-label">Durum:</span>
                                <span class="status ${e.status}">${getStatusText(e.status)}</span>
                            </div>
                            <div class="action-field">
                                <span class="field-label">Tarih:</span>
                                `+(e.date?formatDate(e.date):"Belirtilmemiş")+`
                            </div>
                            <div class="action-field">
                                <span class="field-label">Açıklama:</span><br>
                                ${e.description}
                            </div>
                        </div>
                    `})}if(a.length>0){o+=`<h2>🤝 Ortak Aksiyonlar (${a.length})</h2>`;a.forEach(e=>{o+=`
                        <div class="action-item team-ortak">
                            <div class="action-title">${e.title}</div>
                            <div class="action-field">
                                <span class="field-label">Durum:</span>
                                <span class="status ${e.status}">${getStatusText(e.status)}</span>
                            </div>
                            <div class="action-field">
                                <span class="field-label">Tarih:</span>
                                `+(e.date?formatDate(e.date):"Belirtilmemiş")+`
                            </div>
                            <div class="action-field">
                                <span class="field-label">Açıklama:</span><br>
                                ${e.description}
                            </div>
                        </div>
                    `})}o+="\n                </body>\n                </html>\n            ";const i=new Blob(["\ufeff",o],{type:"application/msword"});const r=URL.createObjectURL(i);const l=document.createElement("a");const s=(new Date).toISOString().split("T")[0];l.href=r;l.download=`Aksiyon_Takip_Raporu_${s}.doc`;document.body.appendChild(l);l.click();document.body.removeChild(l);URL.revokeObjectURL(r)}loadActions();initBackupSystem();setInterval(updateBackupStatus,6e4);document.addEventListener("keydown",e=>{if(e.ctrlKey&&"i"===e.key){e.preventDefault();importBackup()}});
    </script>
</body>
</html>
